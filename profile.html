<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸ªäººä¸­å¿ƒ - Otherwise</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Navigation Header -->
    <header class="nav">
        <div class="nav-container">
            <div class="nav-brand">
                <span>Otherwise</span>
                <span style="font-weight: 400; color: var(--color-text-secondary); margin-left: 8px;">å¦åˆ™</span>
            </div>
            <nav class="nav-links">
                <a href="index.html" class="nav-link">é¦–é¡µ</a>
                <a href="projects.html" class="nav-link">é¡¹ç›®è¯é¢˜</a>
                <a href="profile.html" class="nav-link active">ä¸ªäººä¸­å¿ƒ</a>
                <div id="navButtons">
                    <!-- Content here will be dynamically inserted by navigation.js -->
                </div>
            </nav>
        </div>
    </header>

    <div class="container" style="padding-top: 2rem; padding-bottom: 2rem;">
        <div class="grid grid-cols-3" style="gap: 2rem;">
            <!-- ä¸ªäººä¿¡æ¯å¡ç‰‡ -->
            <div>
                <div class="card" style="margin-bottom: 1.5rem;">
                    <div class="text-center" style="margin-bottom: 1.5rem;">
                        <!-- å¤´åƒä¸Šä¼ åŒºåŸŸ -->
                        <div style="position: relative; width: 80px; height: 80px; margin: 0 auto 1rem;">
                            <div style="width: 80px; height: 80px; background-color: var(--color-background-tertiary); border-radius: 50%; display: flex; align-items: center; justify-content: center; overflow: hidden;" id="avatarDisplay">
                                <span style="font-size: 2rem; color: var(--color-text-muted);" id="avatarPlaceholder">ğŸ‘¤</span>
                                <img id="avatarImage" style="width: 100%; height: 100%; object-fit: cover; display: none;" alt="ç”¨æˆ·å¤´åƒ">
                            </div>
                            <button onclick="triggerAvatarUpload()" style="position: absolute; bottom: 0; right: 0; background-color: var(--color-primary); color: var(--color-secondary); border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; border: none; cursor: pointer;">
                                ğŸ“·
                            </button>
                            <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                        </div>
                        
                        <!-- ç”¨æˆ·åŸºæœ¬ä¿¡æ¯æ˜¾ç¤º -->
                        <h2 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.25rem;" id="displayNickname">åŠ è½½ä¸­...</h2>
                        <p style="font-size: 0.875rem; color: var(--color-text-secondary); margin-bottom: 0.5rem;" id="displayUserType">åŠ è½½ä¸­...</p>
                        <div id="displayTags" style="display: flex; flex-wrap: wrap; gap: 0.25rem; justify-content: center;">
                            <!-- ç”¨æˆ·æ ‡ç­¾å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                        </div>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; gap: 1rem;" id="profileDetails">
                        <div>
                            <label class="form-label" style="margin-bottom: 0.25rem;">æ‰€å±æœºæ„</label>
                            <p style="font-size: 0.875rem;" id="displayOrganization">åŠ è½½ä¸­...</p>
                        </div>
                        <div>
                            <label class="form-label" style="margin-bottom: 0.25rem;">ç ”ç©¶æ–¹å‘</label>
                            <p style="font-size: 0.875rem;" id="displayResearchField">åŠ è½½ä¸­...</p>
                        </div>
                        <div>
                            <label class="form-label" style="margin-bottom: 0.25rem;">ä¸ªäººç®€ä»‹</label>
                            <p style="font-size: 0.875rem;" id="displayBio">æš‚æ— ç®€ä»‹</p>
                        </div>
                        
                        <!-- ç»Ÿè®¡æ•°æ® -->
                        <div class="flex justify-between" style="font-size: 0.875rem; border-top: 1px solid var(--color-border); padding-top: 1rem;" id="profileStats">
                            <div class="text-center">
                                <div style="font-weight: 600;" id="followersCount">--</div>
                                <div style="color: var(--color-text-secondary);">ç²‰ä¸</div>
                            </div>
                            <div class="text-center">
                                <div style="font-weight: 600;" id="followingCount">--</div>
                                <div style="color: var(--color-text-secondary);">å…³æ³¨</div>
                            </div>
                            <div class="text-center">
                                <div style="font-weight: 600;" id="projectsCount">--</div>
                                <div style="color: var(--color-text-secondary);">é¡¹ç›®</div>
                            </div>
                        </div>
                        
                        <button onclick="openEditModal()" class="btn btn-primary" style="width: 100%;">
                            ç¼–è¾‘èµ„æ–™
                        </button>
                    </div>
                </div>

                <!-- èº«ä»½éªŒè¯çŠ¶æ€ -->
                <div class="card">
                    <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1rem;">èº«ä»½éªŒè¯</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                        <div class="flex justify-between items-center">
                            <span style="font-size: 0.875rem; color: var(--color-text-secondary);">é‚®ç®±éªŒè¯</span>
                            <span class="status-badge status-completed" id="emailVerifyStatus">å·²éªŒè¯</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span style="font-size: 0.875rem; color: var(--color-text-secondary);">èº«ä»½è®¤è¯</span>
                            <span class="status-badge status-pending" id="identityVerifyStatus">å¾…è®¤è¯</span>
                        </div>
                    </div>
                    <button style="margin-top: 0.75rem; font-size: 0.875rem; color: var(--color-text-secondary); background: none; border: none; cursor: pointer; text-decoration: underline;">ç”³è¯·èº«ä»½è®¤è¯</button>
                </div>
            </div>

            <!-- ä¸»å†…å®¹åŒºåŸŸ -->
            <div style="grid-column: span 2;">
                <!-- æ ‡ç­¾å¯¼èˆª -->
                <div class="card" style="margin-bottom: 1.5rem; padding: 0;">
                    <div style="border-bottom: 1px solid var(--color-border);">
                        <nav class="flex" style="padding: 0 1.5rem;">
                            <button class="profile-tab" data-tab="overview" style="border-bottom: 2px solid var(--color-primary); color: var(--color-text-primary); padding: 1rem 2rem; background: none; border-top: none; border-left: none; border-right: none; cursor: pointer; font-weight: 500;">
                                æ¦‚è§ˆ
                            </button>
                            <button class="profile-tab" data-tab="projects" style="border-bottom: 2px solid transparent; color: var(--color-text-secondary); padding: 1rem 2rem; background: none; border: none; cursor: pointer;">
                                æˆ‘çš„é¡¹ç›®
                            </button>
                            <button class="profile-tab" data-tab="discussions" style="border-bottom: 2px solid transparent; color: var(--color-text-secondary); padding: 1rem 2rem; background: none; border: none; cursor: pointer;">
                                å‚ä¸è®¨è®º
                            </button>
                            <button class="profile-tab" data-tab="negations" style="border-bottom: 2px solid transparent; color: var(--color-text-secondary); padding: 1rem 2rem; background: none; border: none; cursor: pointer;">
                                å¦å®šè®°å½•
                            </button>
                        </nav>
                    </div>

                    <!-- æ¦‚è§ˆ Tab Content -->
                    <div id="overview" class="tab-content" style="padding: 1.5rem;">
                        <div class="grid grid-cols-2" style="gap: 1.5rem;">
                            <!-- æœ€è¿‘æ´»åŠ¨ -->
                            <div>
                                <h4 style="font-size: 1.125rem; font-weight: 500; margin-bottom: 1rem;">æœ€è¿‘æ´»åŠ¨</h4>
                                <div style="display: flex; flex-direction: column; gap: 0.75rem;" id="recentActivity">
                                    <div style="font-size: 0.875rem; color: var(--color-text-secondary);">æš‚æ— æœ€è¿‘æ´»åŠ¨</div>
                                </div>
                            </div>
                            
                            <!-- å…³æ³¨çš„è¯é¢˜ -->
                            <div>
                                <h4 style="font-size: 1.125rem; font-weight: 500; margin-bottom: 1rem;">å…³æ³¨çš„è¯é¢˜</h4>
                                <div style="display: flex; flex-direction: column; gap: 0.75rem;" id="followedTopics">
                                    <div style="font-size: 0.875rem; color: var(--color-text-secondary);">æš‚æ— å…³æ³¨çš„è¯é¢˜</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- æˆ‘çš„é¡¹ç›® Tab Content -->
                    <div id="projects" class="tab-content" style="padding: 1.5rem; display: none;">
                        <div class="flex justify-between items-center" style="margin-bottom: 1rem;">
                            <h4 style="font-size: 1.125rem; font-weight: 500;">æˆ‘çš„é¡¹ç›®</h4>
                            <button onclick="window.createProject()" class="btn btn-primary btn-sm">
                                å‘å¸ƒæ–°é¡¹ç›®
                            </button>
                        </div>
                        <div style="display: flex; flex-direction: column; gap: 1rem;" id="myProjectsList">
                            <div class="text-center" style="padding: 2rem 0; color: var(--color-text-secondary);">
                                <p>æ‚¨è¿˜æ²¡æœ‰å‘å¸ƒé¡¹ç›®</p>
                                <button onclick="window.createProject()" style="margin-top: 0.5rem; color: var(--color-text-primary); background: none; border: none; cursor: pointer; text-decoration: underline;">å‘å¸ƒç¬¬ä¸€ä¸ªé¡¹ç›®</button>
                            </div>
                        </div>
                    </div>

                    <!-- å‚ä¸è®¨è®º Tab Content -->
                    <div id="discussions" class="tab-content" style="padding: 1.5rem; display: none;">
                        <h4 style="font-size: 1.125rem; font-weight: 500; margin-bottom: 1rem;">å‚ä¸çš„è®¨è®º</h4>
                        <div style="display: flex; flex-direction: column; gap: 1rem;" id="myDiscussionsList">
                            <div class="text-center" style="padding: 2rem 0; color: var(--color-text-secondary);">æš‚æ— å‚ä¸çš„è®¨è®º</div>
                        </div>
                    </div>

                    <!-- å¦å®šè®°å½• Tab Content -->
                    <div id="negations" class="tab-content" style="padding: 1.5rem; display: none;">
                        <h4 style="font-size: 1.125rem; font-weight: 500; margin-bottom: 1rem;">æˆ‘çš„å¦å®šè®°å½•</h4>
                        <div style="display: flex; flex-direction: column; gap: 1rem;" id="myNegationsList">
                            <div class="text-center" style="padding: 2rem 0; color: var(--color-text-secondary);">æš‚æ— å¦å®šè®°å½•</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ç¼–è¾‘èµ„æ–™æ¨¡æ€æ¡† -->
    <div id="editProfileModal" style="display: none; position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.5); z-index: 50; padding: 1rem; overflow-y: auto;">
        <div style="position: relative; top: 5%; margin: 0 auto; max-width: 600px;">
            <div class="card" style="padding: 2rem;">
                <div class="flex justify-between items-center" style="margin-bottom: 1.5rem;">
                    <h3 style="font-size: 1.25rem; font-weight: 600;">ç¼–è¾‘ä¸ªäººèµ„æ–™</h3>
                    <button onclick="closeEditModal()" style="background: none; border: none; color: var(--color-text-muted); cursor: pointer; font-size: 1.25rem;">âœ•</button>
                </div>
                
                <form id="editProfileForm">
                    <div class="form-group">
                        <label for="editNickname" class="form-label">æ˜µç§°</label>
                        <input type="text" id="editNickname" class="form-input" placeholder="è¯·è¾“å…¥æ˜µç§°">
                    </div>
                    
                    <div class="form-group">
                        <label for="editOrganization" class="form-label">æ‰€å±æœºæ„</label>
                        <input type="text" id="editOrganization" class="form-input" placeholder="è¯·è¾“å…¥æ‰€å±æœºæ„">
                    </div>
                    
                    <div class="form-group">
                        <label for="editResearchField" class="form-label">ç ”ç©¶æ–¹å‘</label>
                        <input type="text" id="editResearchField" class="form-input" placeholder="è¯·è¾“å…¥ç ”ç©¶æ–¹å‘">
                    </div>
                    
                    <div class="form-group">
                        <label for="editBio" class="form-label">ä¸ªäººç®€ä»‹</label>
                        <textarea id="editBio" class="form-input form-textarea" placeholder="è¯·è¾“å…¥ä¸ªäººç®€ä»‹"></textarea>
                    </div>
                    
                    <div class="flex justify-end" style="gap: 0.75rem;">
                        <button type="button" onclick="closeEditModal()" class="btn btn-ghost">å–æ¶ˆ</button>
                        <button type="submit" class="btn btn-primary">ä¿å­˜</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="navigation.js"></script>
    <script src="main.js"></script>
    <script src="profile-edit.js"></script>

    <script>
        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–ä¸ªäººèµ„æ–™åŠŸèƒ½
            if (typeof ProfileManager !== 'undefined') {
                const profileManager = new ProfileManager();
                profileManager.init();
            }

            // æ ‡ç­¾é¡µåˆ‡æ¢åŠŸèƒ½
            document.querySelectorAll('.profile-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const targetTab = this.getAttribute('data-tab');
                    
                    // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
                    document.querySelectorAll('.profile-tab').forEach(t => {
                        t.style.borderBottom = '2px solid transparent';
                        t.style.color = 'var(--color-text-secondary)';
                        t.style.fontWeight = '400';
                    });
                    
                    // è®¾ç½®å½“å‰æ ‡ç­¾ä¸ºæ´»åŠ¨çŠ¶æ€
                    this.style.borderBottom = '2px solid var(--color-primary)';
                    this.style.color = 'var(--color-text-primary)';
                    this.style.fontWeight = '500';
                    
                    // éšè—æ‰€æœ‰å†…å®¹
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.style.display = 'none';
                    });
                    
                    // æ˜¾ç¤ºç›®æ ‡å†…å®¹
                    document.getElementById(targetTab).style.display = 'block';
                });
            });

            // æ¨¡æ‹Ÿæ•°æ®
            document.getElementById('displayNickname').textContent = 'å¼ ç ”ç©¶å‘˜';
            document.getElementById('displayUserType').textContent = 'é«˜ç­‰é™¢æ ¡ç ”ç©¶è€…';
            document.getElementById('displayOrganization').textContent = 'æ¸…åå¤§å­¦è®¡ç®—æœºç³»';
            document.getElementById('displayResearchField').textContent = 'äººå·¥æ™ºèƒ½ã€æœºå™¨å­¦ä¹ ';
            document.getElementById('followersCount').textContent = '128';
            document.getElementById('followingCount').textContent = '45';
            document.getElementById('projectsCount').textContent = '3';
        });

        // å¤´åƒä¸Šä¼ 
        function triggerAvatarUpload() {
            document.getElementById('avatarInput').click();
        }

        // æ‰“å¼€ç¼–è¾‘æ¨¡æ€æ¡†
        function openEditModal() {
            document.getElementById('editProfileModal').style.display = 'block';
            
            // å¡«å……å½“å‰æ•°æ®
            document.getElementById('editNickname').value = document.getElementById('displayNickname').textContent;
            document.getElementById('editOrganization').value = document.getElementById('displayOrganization').textContent;
            document.getElementById('editResearchField').value = document.getElementById('displayResearchField').textContent;
            document.getElementById('editBio').value = document.getElementById('displayBio').textContent === 'æš‚æ— ç®€ä»‹' ? '' : document.getElementById('displayBio').textContent;
        }

        // å…³é—­ç¼–è¾‘æ¨¡æ€æ¡†
        function closeEditModal() {
            document.getElementById('editProfileModal').style.display = 'none';
        }

        // è¡¨å•æäº¤
        document.getElementById('editProfileForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // æ›´æ–°æ˜¾ç¤ºçš„æ•°æ®
            document.getElementById('displayNickname').textContent = document.getElementById('editNickname').value;
            document.getElementById('displayOrganization').textContent = document.getElementById('editOrganization').value;
            document.getElementById('displayResearchField').textContent = document.getElementById('editResearchField').value;
            document.getElementById('displayBio').textContent = document.getElementById('editBio').value || 'æš‚æ— ç®€ä»‹';
            
            closeEditModal();
        });
    </script>
</body>
</html>


